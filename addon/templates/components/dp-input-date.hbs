<dp-input
  id={{elementId}}
  class="date{{if class (concat ' ' class)}}"
>
  {{#if hasBlock}}
    {{yield (hash
      header=(component 'dp-calendar-header'
        datetime=_datetime
        isYearRelevant=isYearRelevant
        increment=-1
        incrementUnits='months'
        setMode=(action 'setMode')
        onClick=(action 'changeInputFrame')
        onIncrement=(action 'onIncrement')
      )
      dow=(component 'dp-calendar-dow'
        weekStartsOn=weekStartsOn
      )
      dates=(component 'dp-calendar-dates'
        datetime=_datetime
        selected=datetime
        isYearRelevant=isYearRelevant
        onChange=(action 'onChange')
      )
      months=(component 'dp-calendar-months'
        datetime=_datetime
        isYearRelevant=isYearRelevant
        onChange=(action 'onChange')
      )
      years=(component 'dp-calendar-years'
        datetime=_datetime
        onChange=(action 'onChange')
      )

    )}}
  {{else}}
    {{! INLINE }}

    {{dp-calendar-header
      datetime=_datetime
      isYearRelevant=isYearRelevant
      setMode=(action 'setMode')
      onClick=(action 'changeInputFrame')
      onIncrement=(action 'onIncrement')
    }}

    <dp-frame>
      {{dp-calendar-dates
        mode=mode
        datetime=_datetime
        selected=datetime
        isYearRelevant=isYearRelevant
        newDate=(action 'onChange')
      }}

      {{! -- Aux views for jumping the viewfinder }}
      {{dp-calendar-months
        datetime=_datetime
        onChange=(action 'changeViewTimeframe')
      }}
      {{dp-calendar-years
        datetime=_datetime
        onChange=(action 'changeViewTimeframe')
      }}
    </dp-frame>


    <animations>
      {{! Animation Entrances }}
      {{ui-animate animateIn
        enter=true
        duration=animateInDuration
        event='show-dates'
        domClass='dp-calendar-dates'
      }}

      {{ui-animate animateIn
        enter=true
        duration=animateInDuration
        event='show-months'
        domClass='dp-calendar-months'
      }}

      {{ui-animate animateIn
        enter=true
        duration=animateInDuration
        event='show-years'
        domClass='dp-calendar-years'
      }}

      {{! Animation Exits }}
      {{ui-animate animateOut
        duration=animateOutDuration
        exit=true
        event='hide-dates'
        domClass='dp-calendar-dates'
      }}

      {{ui-animate animateOut
        exit=true
        duration=animateOutDuration
        event='hide-months'
        domClass='dp-calendar-months'
      }}

      {{ui-animate animateOut
        exit=true
        duration=animateOutDuration
        event='hide-years'
        domClass='dp-calendar-years'
      }}

    </animations>

  {{/if}}
</dp-input>
